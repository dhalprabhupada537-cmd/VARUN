import streamlit as st
import pandas as pd
import numpy as np
import plotly.express as px
import plotly.graph_objects as go
from PIL import Image, ImageDraw
import time
from datetime import datetime, timedelta
import os

# Page configuration
st.set_page_config(
    page_title="VARUN AI Crop Recommendation",
    page_icon="ЁЯМ╛",
    layout="wide",
    initial_sidebar_state="expanded"
)

# ===== EMBEDDED LANGUAGE DATA =====
LANGUAGES = {
    'en': {
        'name': 'English',
        'direction': 'ltr',
        'states': {
            'Punjab': 'Punjab',
            'Haryana': 'Haryana', 
            'Uttar Pradesh': 'Uttar Pradesh',
            'Maharashtra': 'Maharashtra',
            'Karnataka': 'Karnataka',
            'Tamil Nadu': 'Tamil Nadu',
            'Andhra Pradesh': 'Andhra Pradesh',
            'Gujarat': 'Gujarat',
            'Odisha': 'Odisha',
            'Jharkhand': 'Jharkhand',
            'West Bengal': 'West Bengal',
            'Bihar': 'Bihar',
            'Select': 'Select Region'
        },
        'ui': {
            'app_name': 'VARUN AI',
            'tagline': 'Vikasit Adhunik Roopantaran ke liye Uttam Nirdesh',
            'farmer_details': 'Farmer Details',
            'full_name': 'Full Name',
            'region': 'Region',
            'farm_size': 'Farm Size (acres)',
            'soil_properties': 'Soil Properties',
            'soil_type': 'Soil Type',
            'soil_ph': 'Soil pH',
            'soil_moisture': 'Soil Moisture (%)',
            'nitrogen': 'Nitrogen (kg/ha)',
            'phosphorus': 'Phosphorus (kg/ha)',
            'potassium': 'Potassium (kg/ha)',
            'environmental_factors': 'Environmental Factors',
            'temperature': 'Temperature (┬░C)',
            'rainfall': 'Annual Rainfall (mm)',
            'humidity': 'Humidity (%)',
            'analyze_button': 'Analyze & Recommend',
            'dashboard': 'Dashboard',
            'crop_recommendation': 'Crop Recommendation',
            'soil_analysis': 'Soil Analysis',
            'weather_forecast': 'Weather Forecast',
            'farm_overview': 'Farm Overview',
            'soil_nutrient_levels': 'Soil Nutrient Levels',
            'recommended_crop': 'Recommended Crop',
            'expected_yield': 'Expected Yield',
            'success_probability': 'Success Probability',
            'why_this_crop': 'Why this crop?',
            'planting_guide': 'Planting Guide',
            'best_planting_time': 'Best Planting Time',
            'water_requirements': 'Water Requirements',
            'fertilizer_recommendations': 'Fertilizer Recommendations',
            'harvest_timeline': 'Harvest Timeline',
            'market_insights': 'Market Insights',
            'current_market_price': 'Current market price',
            'demand_trend': 'Demand trend',
            'click_to_analyze': 'Click the button to get crop recommendations',
            'ph_level': 'pH Level',
            'moisture': 'Moisture',
            'organic_matter': 'Organic Matter',
            'wind_speed': 'Wind Speed',
            'created_by': 'Created with love by',
            'team_name': 'Team AgroNova',
            'for_sih': 'for SIH 2025',
            'language': 'Language',
            'select_language': 'Select Language',
            'not_specified': 'Not specified',
            'regional_preference': 'Regional Preference',
            'soil_type_match': 'Soil Type Match',
            'ph_suitability': 'pH Suitability',
            'temperature_suitability': 'Temperature Suitability',
            'rainfall_suitability': 'Rainfall Suitability',
            'nutrient_suitability': 'Nutrient Suitability',
            'alternative_options': 'Alternative Options',
            'detailed_factor_analysis': 'Detailed Factor Analysis',
            'suitability_analysis': 'Suitability Analysis for',
            'analysis_loading': 'Analyzing your farm data and generating recommendations...'
        },
        'crops': {
            'Wheat': 'Wheat',
            'Rice': 'Rice',
            'Maize': 'Maize',
            'Cotton': 'Cotton',
            'Soybean': 'Soybean',
            'Pulses': 'Pulses',
            'Sugarcane': 'Sugarcane',
            'Groundnut': 'Groundnut'
        },
        'reasons': {
            'highly_suitable': 'Highly suitable for {} region',
            'not_typical': 'Not typically grown in {}',
            'ideal_soil': 'Ideal for {} soil',
            'not_optimal_soil': 'Not optimal for {} soil (prefers {})',
            'optimal_ph': 'Optimal pH range ({}-{})',
            'ph_low': 'pH slightly low (ideal: {}-{})',
            'ph_high': 'pH slightly high (ideal: {}-{})',
            'optimal_temp': 'Optimal temperature range ({}-{}┬░C)',
            'temp_low': 'Temperature slightly low (ideal: {}-{}┬░C)',
            'temp_high': 'Temperature slightly high (ideal: {}-{}┬░C)',
            'optimal_rain': 'Optimal rainfall ({}-{}mm)',
            'rain_low': 'Rainfall slightly low (ideal: {}-{}mm)',
            'rain_high': 'Rainfall slightly high (ideal: {}-{}mm)',
            'nitrogen_issue': 'Nitrogen level not optimal for {}',
            'phosphorus_issue': 'Phosphorus level not optimal for {}',
            'potassium_issue': 'Potassium level not optimal for {}'
        }
    },
    'hi': {
        'name': 'рд╣рд┐рдВрджреА',
        'direction': 'ltr',
        'states': {
            'Punjab': 'рдкрдВрдЬрд╛рдм',
            'Haryana': 'рд╣рд░рд┐рдпрд╛рдгрд╛',
            'Uttar Pradesh': 'рдЙрддреНрддрд░ рдкреНрд░рджреЗрд╢',
            'Maharashtra': 'рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░',
            'Karnataka': 'рдХрд░реНрдирд╛рдЯрдХ',
            'Tamil Nadu': 'рддрдорд┐рд▓рдирд╛рдбреБ',
            'Andhra Pradesh': 'рдЖрдВрдзреНрд░ рдкреНрд░рджреЗрд╢',
            'Gujarat': 'рдЧреБрдЬрд░рд╛рдд',
            'Odisha': 'рдУрдбрд┐рд╢рд╛',
            'Jharkhand': 'рдЭрд╛рд░рдЦрдВрдб',
            'West Bengal': 'рдкрд╢реНрдЪрд┐рдо рдмрдВрдЧрд╛рд▓',
            'Bihar': 'рдмрд┐рд╣рд╛рд░',
            'Select': 'рдХреНрд╖реЗрддреНрд░ рдЪреБрдиреЗрдВ'
        },
        'ui': {
            'app_name': 'VARUN AI',
            'tagline': 'рд╡рд┐рдХрд╕рд┐рдд рдЖрдзреБрдирд┐рдХ рд░реВрдкрд╛рдВрддрд░рдг рдХреЗ рд▓рд┐рдП рдЙрддреНрддрдо рдирд┐рд░реНрджреЗрд╢',
            'farmer_details': 'рдХрд┐рд╕рд╛рди рд╡рд┐рд╡рд░рдг',
            'full_name': 'рдкреВрд░рд╛ рдирд╛рдо',
            'region': 'рдХреНрд╖реЗрддреНрд░',
            'farm_size': 'рдЦреЗрдд рдХрд╛ рдЖрдХрд╛рд░ (рдПрдХрдбрд╝)',
            'soil_properties': 'рдорд┐рдЯреНрдЯреА рдХреЗ рдЧреБрдг',
            'soil_type': 'рдорд┐рдЯреНрдЯреА рдХрд╛ рдкреНрд░рдХрд╛рд░',
            'soil_ph': 'рдорд┐рдЯреНрдЯреА рдХрд╛ pH',
            'soil_moisture': 'рдорд┐рдЯреНрдЯреА рдХреА рдирдореА (%)',
            'nitrogen': 'рдирд╛рдЗрдЯреНрд░реЛрдЬрди (kg/ha)',
            'phosphorus': 'рдлреЙрд╕реНрдлреЛрд░рд╕ (kg/ha)',
            'potassium': 'рдкреЛрдЯреИрд╢рд┐рдпрдо (kg/ha)',
            'environmental_factors': 'рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рдХрд╛рд░рдХ',
            'temperature': 'рддрд╛рдкрдорд╛рди (┬░C)',
            'rainfall': 'рд╡рд╛рд░реНрд╖рд┐рдХ рд╡рд░реНрд╖рд╛ (mm)',
            'humidity': 'рдЖрд░реНрджреНрд░рддрд╛ (%)',
            'analyze_button': 'рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ рдФрд░ рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░реЗрдВ',
            'dashboard': 'рдбреИрд╢рдмреЛрд░реНрдб',
            'crop_recommendation': 'рдлрд╕рд▓ рд╕рд┐рдлрд╛рд░рд┐рд╢',
            'soil_analysis': 'рдорд┐рдЯреНрдЯреА рд╡рд┐рд╢реНрд▓реЗрд╖рдг',
            'weather_forecast': 'рдореМрд╕рдо рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди',
            'farm_overview': 'рдЦреЗрдд рдХрд╛ рдЕрд╡рд▓реЛрдХрди',
            'soil_nutrient_levels': 'рдорд┐рдЯреНрдЯреА рдХреЗ рдкреЛрд╖рдХ рддрддреНрд╡реЛрдВ рдХреЗ рд╕реНрддрд░',
            'recommended_crop': 'рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЧрдИ рдлрд╕рд▓',
            'expected_yield': 'рдЕрдиреБрдорд╛рдирд┐рдд рдЙрдкрдЬ',
            'success_probability': 'рд╕рдлрд▓рддрд╛ рдХреА рд╕рдВрднрд╛рд╡рдирд╛',
            'why_this_crop': 'рдпрд╣ рдлрд╕рд▓ рдХреНрдпреЛрдВ?',
            'planting_guide': 'рд░реЛрдкрдг рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛',
            'best_planting_time': 'рд╕рд░реНрд╡реЛрддреНрддрдо рд░реЛрдкрдг рд╕рдордп',
            'water_requirements': 'рдкрд╛рдиреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ',
            'fertilizer_recommendations': 'рдЙрд░реНрд╡рд░рдХ рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ',
            'harvest_timeline': 'рдлрд╕рд▓ рдХрдЯрд╛рдИ рдХреА рд╕рдордпрд╕реАрдорд╛',
            'market_insights': 'рдмрд╛рдЬрд╛рд░ рдХреА рдЬрд╛рдирдХрд╛рд░реА',
            'current_market_price': 'рд╡рд░реНрддрдорд╛рди рдмрд╛рдЬрд╛рд░ рдореВрд▓реНрдп',
            'demand_trend': 'рдорд╛рдВрдЧ рдХреА рдкреНрд░рд╡реГрддреНрддрд┐',
            'click_to_analyze': 'рдлрд╕рд▓ рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ',
            'ph_level': 'pH рд╕реНрддрд░',
            'moisture': 'рдирдореА',
            'organic_matter': 'рдХрд╛рд░реНрдмрдирд┐рдХ рдкрджрд╛рд░реНрде',
            'wind_speed': 'рд╣рд╡рд╛ рдХреА рдЧрддрд┐',
            'created_by': 'рдкреНрдпрд╛рд░ рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛',
            'team_name': 'рдЯреАрдо рдПрдЧреНрд░реЛрдиреЛрд╡рд╛',
            'for_sih': 'рдПрд╕рдЖрдИрдПрдЪ 2025 рдХреЗ рд▓рд┐рдП',
            'language': 'рднрд╛рд╖рд╛',
            'select_language': 'рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ',
            'not_specified': 'рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ',
            'regional_preference': 'рдХреНрд╖реЗрддреНрд░реАрдп рдкреНрд░рд╛рдердорд┐рдХрддрд╛',
            'soil_type_match': 'рдорд┐рдЯреНрдЯреА рдкреНрд░рдХрд╛рд░ рдорд┐рд▓рд╛рди',
            'ph_suitability': 'pH рдЙрдкрдпреБрдХреНрддрддрд╛',
            'temperature_suitability': 'рддрд╛рдкрдорд╛рди рдЙрдкрдпреБрдХреНрддрддрд╛',
            'rainfall_suitability': 'рд╡рд░реНрд╖рд╛ рдЙрдкрдпреБрдХреНрддрддрд╛',
            'nutrient_suitability': 'рдкреЛрд╖рдХ рддрддреНрд╡ рдЙрдкрдпреБрдХреНрддрддрд╛',
            'alternative_options': 'рд╡реИрдХрд▓реНрдкрд┐рдХ рд╡рд┐рдХрд▓реНрдк',
            'detailed_factor_analysis': 'рд╡рд┐рд╕реНрддреГрдд рдХрд╛рд░рдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдг',
            'suitability_analysis': 'рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрддрддрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг',
            'analysis_loading': 'рдЖрдкрдХреЗ рдлрд╛рд░реНрдо рдбреЗрдЯрд╛ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдФрд░ рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ рддреИрдпрд╛рд░ рдХреА рдЬрд╛ рд░рд╣реА рд╣реИрдВ...'
        },
        'crops': {
            'Wheat': 'рдЧреЗрд╣реВрдВ',
            'Rice': 'рдЪрд╛рд╡рд▓',
            'Maize': 'рдордХреНрдХрд╛',
            'Cotton': 'рдХрдкрд╛рд╕',
            'Soybean': 'рд╕реЛрдпрд╛рдмреАрди',
            'Pulses': 'рджрд▓рд╣рди',
            'Sugarcane': 'рдЧрдиреНрдирд╛',
            'Groundnut': 'рдореВрдВрдЧрдлрд▓реА'
        },
        'reasons': {
            'highly_suitable': '{} рдХреНрд╖реЗрддреНрд░ рдХреЗ рд▓рд┐рдП рдЕрддреНрдпрдзрд┐рдХ рдЙрдкрдпреБрдХреНрдд',
            'not_typical': '{} рдореЗрдВ рдЖрдорддреМрд░ рдкрд░ рдирд╣реАрдВ рдЙрдЧрд╛рдпрд╛ рдЬрд╛рддрд╛',
            'ideal_soil': '{} рдорд┐рдЯреНрдЯреА рдХреЗ рд▓рд┐рдП рдЖрджрд░реНрд╢',
            'not_optimal_soil': '{} рдорд┐рдЯреНрдЯреА рдХреЗ рд▓рд┐рдП рдЗрд╖реНрдЯрддрдо рдирд╣реАрдВ (рдкрд╕рдВрдж рдХрд░рддрд╛ рд╣реИ {})',
            'optimal_ph': 'рдЗрд╖реНрдЯрддрдо pH рд╕реАрдорд╛ ({}-{})',
            'ph_low': 'pH рдереЛрдбрд╝рд╛ рдХрдо (рдЖрджрд░реНрд╢: {}-{})',
            'ph_high': 'pH рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ (рдЖрджрд░реНрд╢: {}-{})',
            'optimal_temp': 'рдЗрд╖реНрдЯрддрдо рддрд╛рдкрдорд╛рди рд╕реАрдорд╛ ({}-{}┬░C)',
            'temp_low': 'рддрд╛рдкрдорд╛рди рдереЛрдбрд╝рд╛ рдХрдо (рдЖрджрд░реНрд╢: {}-{}┬░C)',
            'temp_high': 'рддрд╛рдкрдорд╛рди рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ (рдЖрджрд░реНрд╢: {}-{}┬░C)',
            'optimal_rain': 'рдЗрд╖реНрдЯрддрдо рд╡рд░реНрд╖рд╛ ({}-{}mm)',
            'rain_low': 'рд╡рд░реНрд╖рд╛ рдереЛрдбрд╝реА рдХрдо (рдЖрджрд░реНрд╢: {}-{}mm)',
            'rain_high': 'рд╡рд░реНрд╖рд╛ рдереЛрдбрд╝реА рдЕрдзрд┐рдХ (рдЖрджрд░реНрд╢: {}-{}mm)',
            'nitrogen_issue': '{} рдХреЗ рд▓рд┐рдП рдирд╛рдЗрдЯреНрд░реЛрдЬрди рд╕реНрддрд░ рдЗрд╖реНрдЯрддрдо рдирд╣реАрдВ',
            'phosphorus_issue': '{} рдХреЗ рд▓рд┐рдП рдлреЙрд╕реНрдлреЛрд░рд╕ рд╕реНрддрд░ рдЗрд╖реНрдЯрддрдо рдирд╣реАрдВ',
            'potassium_issue': '{} рдХреЗ рд▓рд┐рдП рдкреЛрдЯреИрд╢рд┐рдпрдо рд╕реНрддрд░ рдЗрд╖реНрдЯрддрдо рдирд╣реАрдВ'
        }
    },
    'or': {
        'name': 'рмУрмбрм┐рмЖ',
        'direction': 'ltr',
        'states': {
            'Punjab': 'рмкрмЮрнНрмЬрм╛рмм',
            'Haryana': 'рм╣рм░рм┐рнЯрм╛рмгрм╛',
            'Uttar Pradesh': 'рмЙрмдрнНрмдрм░ рмкрнНрм░рмжрнЗрм╢',
            'Maharashtra': 'рморм╣рм╛рм░рм╛рм╖рнНрмЯрнНрм░',
            'Karnataka': 'рмХрм░рнНрмгрм╛рмЯрмХ',
            'Tamil Nadu': 'рмдрм╛рморм┐рм▓рмирм╛рмбрнБ',
            'Andhra Pradesh': 'рмЖрмирнНрмзрнНрм░ рмкрнНрм░рмжрнЗрм╢',
            'Gujarat': 'рмЧрнБрмЬрм░рм╛рмЯ',
            'Odisha': 'рмУрмбрм┐рм╢рм╛',
            'Jharkhand': 'рмЭрм╛рмбрмЦрмгрнНрмб',
            'West Bengal': 'рмкрм╢рнНрмЪрм┐рмо рммрмЩрнНрмЧ',
            'Bihar': 'рммрм┐рм╣рм╛рм░',
            'Select': 'рмЕрмЮрнНрмЪрм│ рмЪрнЯрми рмХрм░рмирнНрмдрнБ'
        },
        'ui': {
            'app_name': 'VARUN AI',
            'tagline': 'рммрм┐рмХрм╢рм┐рмд рмЖрмзрнБрмирм┐рмХ рм░рнВрмкрм╛рмирнНрмдрм░рмг рмкрм╛рмЗрмБ рмЙрмдрнНрмдрмо рмирм┐рм░рнНрмжрнЗрм╢',
            'farmer_details': 'рмХрнГрм╖рмХрм░ рммрм┐рммрм░рмгрнА',
            'full_name': 'рмкрнВрм░рм╛ рмирм╛рмо',
            'region': 'рмЕрмЮрнНрмЪрм│',
            'farm_size': 'рмЪрм╛рм╖ рмЬрморм┐рм░ рмЖрмХрм╛рм░ (рмПрмХрм░)',
            'soil_properties': 'рморнГрмдрнНрмдрм┐рмХрм╛рм░ рмЧрнБрмг',
            'soil_type': 'рморнГрмдрнНрмдрм┐рмХрм╛рм░ рмкрнНрм░рмХрм╛рм░',
            'soil_ph': 'рморнГрмдрнНрмдрм┐рмХрм╛рм░ pH',
            'soil_moisture': 'рморнГрмдрнНрмдрм┐рмХрм╛рм░ рмЖрм░рнНрмжрнНрм░рмдрм╛ (%)',
            'nitrogen': 'рмирм╛рмЗрмЯрнНрм░рнЛрмЬрнЗрмирнН (kg/ha)',
            'phosphorus': 'рмлрм╕рмлрм░рм╕рнН (kg/ha)',
            'potassium': 'рмкрмЯрм╛рм╕рм┐рмЕрморнН (kg/ha)',
            'environmental_factors': 'рмкрм░рм┐рммрнЗрм╢рмЧрмд рмХрм╛рм░рмХ',
            'temperature': 'рмдрм╛рмкрморм╛рмдрнНрм░рм╛ (┬░C)',
            'rainfall': 'рммрм╛рм░рнНрм╖рм┐рмХ рммрм░рнНрм╖рм╛ (mm)',
            'humidity': 'рмЖрм░рнНрмжрнНрм░рмдрм╛ (%)',
            'analyze_button': 'рммрм┐рм╢рнНрм│рнЗрм╖рмг рмХрм░ рмПрммрмВ рмкрм░рм╛рморм░рнНрм╢ рмжрм┐рмЕ',
            'dashboard': 'рмбрнНрнЯрм╛рм╕рммрнЛрм░рнНрмб',
            'crop_recommendation': 'рмлрм╕рм▓ рмкрм░рм╛рморм░рнНрм╢',
            'soil_analysis': 'рморнГрмдрнНрмдрм┐рмХрм╛ рммрм┐рм╢рнНрм│рнЗрм╖рмг',
            'weather_forecast': 'рмкрм╛рмгрм┐рмкрм╛рмЧ рмкрнВрм░рнНрммрм╛рмирнБрморм╛рми',
            'farm_overview': 'рмЪрм╛рм╖ рмЬрморм┐рм░ рм╕рморнАрмХрнНрм╖рм╛',
            'soil_nutrient_levels': 'рморнГрмдрнНрмдрм┐рмХрм╛рм░ рмкрнЛрм╖рмХ рмдрмдрнНрмдрнНрн▒рм░ рм╕рнНрмдрм░',
            'recommended_crop': 'рмкрм░рм╛рморм░рнНрм╢рм┐рмд рмлрм╕рм▓',
            'expected_yield': 'рмЖрм╢рм╛рмХрнГрмд рмЙрмдрнНрмкрм╛рмжрми',
            'success_probability': 'рм╕рмлрм│рмдрм╛рм░ рм╕рморнНрмнрм╛рммрмирм╛',
            'why_this_crop': 'рмПрм╣рм┐ рмлрм╕рм▓ рмХрм╛рм╣рм┐рмБрмХрм┐?',
            'planting_guide': 'рм░рнЛрмкрмг рморм╛рм░рнНрмЧрмжрм░рнНрм╢рм┐рмХрм╛',
            'best_planting_time': 'рм╕рм░рнНрммрнЛрмдрнНрмдрмо рм░рнЛрмкрмг рм╕рморнЯ',
            'water_requirements': 'рмЬрм│ рмЖрммрм╢рнНрнЯрмХрмдрм╛',
            'fertilizer_recommendations': 'рм╕рм╛рм░ рмкрм░рм╛рморм░рнНрм╢',
            'harvest_timeline': 'рмлрм╕рм▓ рмХрмЯрм╛рмЗ рм╕рморнЯрм╕рнАрмЮрм╛',
            'market_insights': 'рммрмЬрм╛рм░рм░ рмЕрмирнНрмдрм░рнНрмжрнГрм╖рнНрмЯрм┐',
            'current_market_price': 'рммрм░рнНрмдрнНрмдрморм╛рмирм░ рммрмЬрм╛рм░ рморнВрм▓рнНрнЯ',
            'demand_trend': 'рмЪрм╛рм╣рм┐рмжрм╛ рмкрнНрм░рммрнГрмдрнНрмдрм┐',
            'click_to_analyze': 'рмлрм╕рм▓ рмкрм░рм╛рморм░рнНрм╢ рмкрм╛рмЗрммрм╛ рмкрм╛рмЗрмБ рммрмЯрмирнН рмжрммрм╛рмирнНрмдрнБ',
            'ph_level': 'pH рм╕рнНрмдрм░',
            'moisture': 'рмЖрм░рнНрмжрнНрм░рмдрм╛',
            'organic_matter': 'рмЬрнИрммрм┐рмХ рмкрмжрм╛рм░рнНрме',
            'wind_speed': 'рмкрммрмирм░ рмЧрмдрм┐',
            'created_by': 'рмнрм╛рм▓рнЛрммрм╛рм╕рм╛ рмХрм░рм┐ рмдрм┐рмЖрм░рм┐ рмХрм░рм╛рмпрм╛рмЗрмЫрм┐',
            'team_name': 'рмжрм│ рмЖрмЧрнНрм░рнЛрмирнЛрмнрм╛',
            'for_sih': 'SIH 2025 рмкрм╛рмЗрмБ',
            'language': 'рмнрм╛рм╖рм╛',
            'select_language': 'рмнрм╛рм╖рм╛ рмЪрнЯрми рмХрм░рмирнНрмдрнБ',
            'not_specified': 'рмирм┐рм░рнНрмжрнНрмжрм┐рм╖рнНрмЯ рмирнБрм╣рнЗрмБ',
            'regional_preference': 'рмХрнНрм╖рнЗрмдрнНрм░рнАрнЯ рмкрм╕рмирнНрмж',
            'soil_type_match': 'рморм╛рмЯрм┐ рмкрнНрм░рмХрм╛рм░ рморнЗрм│',
            'ph_suitability': 'pH рмЙрмкрмпрнБрмХрнНрмдрмдрм╛',
            'temperature_suitability': 'рмдрм╛рмкрморм╛рмдрнНрм░рм╛ рмЙрмкрмпрнБрмХрнНрмдрмдрм╛',
            'rainfall_suitability': 'рммрм░рнНрм╖рм╛ рмЙрмкрмпрнБрмХрнНрмдрмдрм╛',
            'nutrient_suitability': 'рмкрнЛрм╖рмХ рмЙрмкрмпрнБрмХрнНрмдрмдрм╛',
            'alternative_options': 'рммрм┐рмХрм│рнНрмк рммрм┐рмХрм│рнНрмк',
            'detailed_factor_analysis': 'рммрм┐рм╕рнНрмдрнГрмд рмХрм╛рм░рмХ рммрм┐рм╢рнНрм│рнЗрм╖рмг',
            'suitability_analysis': 'рмкрм╛рмЗрмБ рмЙрмкрмпрнБрмХрнНрмдрмдрм╛ рммрм┐рм╢рнНрм│рнЗрм╖рмг',
            'analysis_loading': 'рмЖрмкрмгрмЩрнНрмХ рмлрм╛рм░рнНрмо рмдрмернНрнЯ рммрм┐рм╢рнНрм│рнЗрм╖рмг рмПрммрмВ рмкрм░рм╛рморм░рнНрм╢ рмкрнНрм░рм╕рнНрмдрнБрмд рмХрм░рм╛рмпрм╛рмЙрмЫрм┐...'
        },
        'crops': {
            'Wheat': 'рмЧрм╣рмо',
            'Rice': 'рмЪрм╛рмЙрм│',
            'Maize': 'рмормХрм╛',
            'Cotton': 'рмХрмкрм╛рм╣',
            'Soybean': 'рм╕рнЛрнЯрм╛рммрм┐рми',
            'Pulses': 'рмбрм╛рм▓рм┐',
            'Sugarcane': 'рмЖрмЦрнБ',
            'Groundnut': 'рмЪрм┐рмирм╛рммрм╛рмжрм╛рмо'
        },
        'reasons': {
            'highly_suitable': '{} рмЕрмЮрнНрмЪрм│ рмкрм╛рмЗрмБ рмЕрмдрнНрнЯрмзрм┐рмХ рмЙрмкрмпрнБрмХрнНрмд',
            'not_typical': '{} рм░рнЗ рм╕рм╛рмзрм╛рм░рмгрмдрмГ рмЪрм╛рм╖ рмХрм░рм╛рмпрм╛рмП рмирм╛рм╣рм┐рмБ',
            'ideal_soil': '{} рморм╛рмЯрм┐ рмкрм╛рмЗрмБ рмЖрмжрм░рнНрм╢',
            'not_optimal_soil': '{} рморм╛рмЯрм┐ рмкрм╛рмЗрмБ рмЙрмдрнНрмХрнГрм╖рнНрмЯ рмирнБрм╣рнЗрмБ (рмкрм╕рмирнНрмж рмХрм░рнЗ {})',
            'optimal_ph': 'рмЙрмдрнНрмХрнГрм╖рнНрмЯ pH рм╕рнАрморм╛ ({}-{})',
            'ph_low': 'pH рмЯрм┐рмХрнЗ рмХрморнН (рмЖрмжрм░рнНрм╢: {}-{})',
            'ph_high': 'pH рмЯрм┐рмХрнЗ рмЕрмзрм┐рмХ (рмЖрмжрм░рнНрм╢: {}-{})',
            'optimal_temp': 'рмЙрмдрнНрмХрнГрм╖рнНрмЯ рмдрм╛рмкрморм╛рмдрнНрм░рм╛ рм╕рнАрморм╛ ({}-{}┬░C)',
            'temp_low': 'рмдрм╛рмкрморм╛рмдрнНрм░рм╛ рмЯрм┐рмХрнЗ рмХрморнН (рмЖрмжрм░рнНрм╢: {}-{}┬░C)',
            'temp_high': 'рмдрм╛рмкрморм╛рмдрнНрм░рм╛ рмЯрм┐рмХрнЗ рмЕрмзрм┐рмХ (рмЖрмжрм░рнНрм╢: {}-{}┬░C)',
            'optimal_rain': 'рмЙрмдрнНрмХрнГрм╖рнНрмЯ рммрм░рнНрм╖рм╛ ({}-{}mm)',
            'rain_low': 'рммрм░рнНрм╖рм╛ рмЯрм┐рмХрнЗ рмХрморнН (рмЖрмжрм░рнНрм╢: {}-{}mm)',
            'rain_high': 'рммрм░рнНрм╖рм╛ рмЯрм┐рмХрнЗ рмЕрмзрм┐рмХ (рмЖрмжрм░рнНрм╢: {}-{}mm)',
            'nitrogen_issue': '{} рмкрм╛рмЗрмБ рмирм╛рмЗрмЯрнНрм░рнЛрмЬрнЗрмирнН рм╕рнНрмдрм░ рмЙрмдрнНрмХрнГрм╖рнНрмЯ рмирнБрм╣рнЗрмБ',
            'phosphorus_issue': '{} рмкрм╛рмЗрмБ рмлрм╕рмлрм░рм╕рнН рм╕рнНрмдрм░ рмЙрмдрнНрмХрнГрм╖рнНрмЯ рмирнБрм╣рнЗрмБ',
            'potassium_issue': '{} рмкрм╛рмЗрмБ рмкрмЯрм╛рм╕рм┐рмЕрморнН рм╕рнНрмдрм░ рмЙрмдрнНрмХрнГрм╖рнНрмЯ рмирнБрм╣рнЗрмБ'
        }
    },
    'ta': {
        'name': 'родрооро┐ро┤рпН',
        'direction': 'ltr',
        'states': {
            'Punjab': 'рокроЮрпНроЪро╛рокрпН',
            'Haryana': 'ро╣ро░ро┐ропро╛ройро╛',
            'Uttar Pradesh': 'роЙродрпНродро░рокрпН рокро┐ро░родрпЗроЪроорпН',
            'Maharashtra': 'роороХро╛ро░ро╛ро╖рпНроЯро┐ро░ро╛',
            'Karnataka': 'роХро░рпНроиро╛роЯроХро╛',
            'Tamil Nadu': 'родрооро┐ро┤рпНроиро╛роЯрпБ',
            'Andhra Pradesh': 'роЖроирпНродро┐ро░рокрпН рокро┐ро░родрпЗроЪроорпН',
            'Gujarat': 'роХрпБроЬро░ро╛родрпН',
            'Odisha': 'роТроЯро┐роЪро╛',
            'Jharkhand': 'роЬро╛ро░рпНроХрогрпНроЯрпН',
            'West Bengal': 'роорпЗро▒рпНроХрпБ ро╡роЩрпНроХро╛ро│роорпН',
            'Bihar': 'рокрпАроХро╛ро░рпН',
            'Select': 'рокро┐ро░ро╛роирпНродро┐ропродрпНродрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН'
        },
        'ui': {
            'app_name': 'VARUN AI',
            'tagline': 'роорпЗроорпНрокроЯрпНроЯ роиро╡рпАрой рооро╛ро▒рпНро▒родрпНродро┐ро▒рпНроХро╛рой роЪро┐ро▒роирпНрод ро╡ро┤ро┐роХро╛роЯрпНроЯро┐',
            'farmer_details': 'ро╡ро┐ро╡роЪро╛ропро┐ ро╡ро┐ро╡ро░роЩрпНроХро│рпН',
            'full_name': 'роорпБро┤рпБ рокрпЖропро░рпН',
            'region': 'рокро┐ро░ро╛роирпНродро┐ропроорпН',
            'farm_size': 'ро╡ро┐ро╡роЪро╛роп роиро┐ро▓ роЕро│ро╡рпБ (роПроХрпНроХро░рпН)',
            'soil_properties': 'роорогрпН рокрогрпНрокрпБроХро│рпН',
            'soil_type': 'роорогрпН ро╡роХрпИ',
            'soil_ph': 'роорогрпН pH',
            'soil_moisture': 'роорогрпН роИро░рокрпНрокродроорпН (%)',
            'nitrogen': 'роирпИроЯрпНро░роЬройрпН (kg/ha)',
            'phosphorus': 'рокро╛ро╕рпНрокро░ро╕рпН (kg/ha)',
            'potassium': 'рокрпКроЯрпНроЯро╛роЪро┐ропроорпН (kg/ha)',
            'environmental_factors': 'роЪрпБро▒рпНро▒рпБроЪрпНроЪрпВро┤ро▓рпН роХро╛ро░рогро┐роХро│рпН',
            'temperature': 'ро╡рпЖрокрпНрокроиро┐ро▓рпИ (┬░C)',
            'rainfall': 'роЖрогрпНроЯрпБ рооро┤рпИ (mm)',
            'humidity': 'роИро░рокрпНрокродроорпН (%)',
            'analyze_button': 'рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНродрпБ рокро░ро┐роирпНродрпБро░рпИроХрпНроХро╡рпБроорпН',
            'dashboard': 'роЯро╛ро╖рпНрокрпЛро░рпНроЯрпБ',
            'crop_recommendation': 'рокропро┐ро░рпН рокро░ро┐роирпНродрпБро░рпИ',
            'soil_analysis': 'роорогрпН рокроХрпБрокрпНрокро╛ропрпНро╡рпБ',
            'weather_forecast': 'ро╡ро╛ройро┐ро▓рпИ роорпБройрпНройро▒ро┐ро╡ро┐рокрпНрокрпБ',
            'farm_overview': 'ро╡ро┐ро╡роЪро╛роп роиро┐ро▓рпИ роорпЗро▓рпЛроЯрпНроЯроорпН',
            'soil_nutrient_levels': 'роорогрпН роКроЯрпНроЯроЪрпНроЪродрпНродрпБ роЕро│ро╡рпБроХро│рпН',
            'recommended_crop': 'рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпНроЯ рокропро┐ро░рпН',
            'expected_yield': 'роОродро┐ро░рпНрокро╛ро░рпНроХрпНроХрокрпНрокроЯрпБроорпН ро╡ро┐ро│рпИроЪрпНроЪро▓рпН',
            'success_probability': 'ро╡рпЖро▒рпНро▒ро┐ роиро┐роХро┤рпНродроХро╡рпБ',
            'why_this_crop': 'роЗроирпНрод рокропро┐ро░рпН роПройрпН?',
            'planting_guide': 'роироЯро╡рпБ ро╡ро┤ро┐роХро╛роЯрпНроЯро┐',
            'best_planting_time': 'роЪро┐ро▒роирпНрод роироЯро╡рпБ роирпЗро░роорпН',
            'water_requirements': 'роирпАро░рпН родрпЗро╡рпИроХро│рпН',
            'fertilizer_recommendations': 'роЙро░ рокро░ро┐роирпНродрпБро░рпИроХро│рпН',
            'harvest_timeline': 'роЕро▒рпБро╡роЯрпИ роХро╛ро▓роХрпНроХрпЖроЯрпБ',
            'market_insights': 'роЪроирпНродрпИ роирпБрогрпНрогро▒ро┐ро╡рпБроХро│рпН',
            'current_market_price': 'родро▒рпНрокрпЛродрпИроп роЪроирпНродрпИ ро╡ро┐ро▓рпИ',
            'demand_trend': 'родрпЗро╡рпИрокрпН рокрпЛроХрпНроХрпБ',
            'click_to_analyze': 'рокропро┐ро░рпН рокро░ро┐роирпНродрпБро░рпИроХро│рпИрокрпН рокрпЖро▒ рокрпКродрпНродро╛ройрпИроХрпН роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН',
            'ph_level': 'pH роЕро│ро╡рпБ',
            'moisture': 'роИро░рокрпНрокродроорпН',
            'organic_matter': 'роХро░ро┐роорокрпН рокрпКро░рпБро│рпН',
            'wind_speed': 'роХро╛ро▒рпНро▒ро┐ройрпН ро╡рпЗроХроорпН',
            'created_by': 'роЕройрпНрокрпЛроЯрпБ роЙро░рпБро╡ро╛роХрпНроХрокрпНрокроЯрпНроЯродрпБ',
            'team_name': 'роЯрпАроорпН роЕроХрпНро░рпЛроирпЛро╡ро╛',
            'for_sih': 'SIH 2025роХрпНроХро╛роХ',
            'language': 'роорпКро┤ро┐',
            'select_language': 'роорпКро┤ро┐ропрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН',
            'not_specified': 'роХрпБро▒ро┐рокрпНрокро┐роЯрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ',
            'regional_preference': 'рокро┐ро░ро╛роирпНродро┐роп ро╡ро┐ро░рпБрокрпНрокроорпН',
            'soil_type_match': 'роорогрпН ро╡роХрпИ рокрпКро░рпБродрпНродроорпН',
            'ph_suitability': 'pH рокрпКро░рпБродрпНродроорпН',
            'temperature_suitability': 'ро╡рпЖрокрпНрокроиро┐ро▓рпИ рокрпКро░рпБродрпНродроорпН',
            'rainfall_suitability': 'рооро┤рпИ рокрпКро░рпБродрпНродроорпН',
            'nutrient_suitability': 'роКроЯрпНроЯроЪрпНроЪродрпНродрпБ рокрпКро░рпБродрпНродроорпН',
            'alternative_options': 'рооро╛ро▒рпНро▒рпБ ро╡ро┐ро░рпБрокрпНрокроЩрпНроХро│рпН',
            'detailed_factor_analysis': 'ро╡ро┐ро░ро┐ро╡ро╛рой роХро╛ро░рогро┐ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ',
            'suitability_analysis': 'роХрпНроХро╛рой рокрпКро░рпБродрпНродроорпН рокроХрпБрокрпНрокро╛ропрпНро╡рпБ',
            'analysis_loading': 'роЙроЩрпНроХро│рпН рокрогрпНрогрпИ родро░ро╡рпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНродрпБ рокро░ро┐роирпНродрпБро░рпИроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХрпБроХро┐ро▒рпЛроорпН...'
        },
        'crops': {
            'Wheat': 'роХрпЛродрпБроорпИ',
            'Rice': 'роирпЖро▓рпН',
            'Maize': 'роЪрпЛро│роорпН',
            'Cotton': 'рокро░рпБродрпНродро┐',
            'Soybean': 'роЪрпЛропро╛',
            'Pulses': 'рокро░рпБрокрпНрокрпБ ро╡роХрпИроХро│рпН',
            'Sugarcane': 'роХро░рпБроорпНрокрпБ',
            'Groundnut': 'роиро┐ро▓роХрпНроХроЯро▓рпИ'
        },
        'reasons': {
            'highly_suitable': '{} рокро┐ро░ро╛роирпНродро┐ропродрпНродро┐ро▒рпНроХрпБ рооро┐роХро╡рпБроорпН рокрпКро░рпБродрпНродрооро╛ройродрпБ',
            'not_typical': '{} роЗро▓рпН рокрпКродрпБро╡ро╛роХ рокропро┐ро░ро┐роЯрокрпНрокроЯрпБро╡родро┐ро▓рпНро▓рпИ',
            'ideal_soil': '{} роорогрпНрогрпБроХрпНроХрпБ роПро▒рпНро▒родрпБ',
            'not_optimal_soil': '{} роорогрпНрогрпБроХрпНроХрпБ роЙроХроирпНродродро▓рпНро▓ (ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒родрпБ {})',
            'optimal_ph': 'роЙроХроирпНрод pH ро╡ро░роорпНрокрпБ ({}-{})',
            'ph_low': 'pH роЪро▒рпНро▒рпБ роХрпБро▒рпИро╡рпБ (роЙроХроирпНрод: {}-{})',
            'ph_high': 'pH роЪро▒рпНро▒рпБ роЕродро┐роХроорпН (роЙроХроирпНрод: {}-{})',
            'optimal_temp': 'роЙроХроирпНрод ро╡рпЖрокрпНрокроиро┐ро▓рпИ ро╡ро░роорпНрокрпБ ({}-{}┬░C)',
            'temp_low': 'ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЪро▒рпНро▒рпБ роХрпБро▒рпИро╡рпБ (роЙроХроирпНрод: {}-{}┬░C)',
            'temp_high': 'ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЪро▒рпНро▒рпБ роЕродро┐роХроорпН (роЙроХроирпНрод: {}-{}┬░C)',
            'optimal_rain': 'роЙроХроирпНрод рооро┤рпИ ({}-{}mm)',
            'rain_low': 'рооро┤рпИ роЪро▒рпНро▒рпБ роХрпБро▒рпИро╡рпБ (роЙроХроирпНрод: {}-{}mm)',
            'rain_high': 'рооро┤рпИ роЪро▒рпНро▒рпБ роЕродро┐роХроорпН (роЙроХроирпНрод: {}-{}mm)',
            'nitrogen_issue': '{} роХрпНроХрпБ роирпИроЯрпНро░роЬройрпН роЕро│ро╡рпБ роЙроХроирпНродродро▓рпНро▓',
            'phosphorus_issue': '{} роХрпНроХрпБ рокро╛ро╕рпНрокро░ро╕рпН роЕро│ро╡рпБ роЙроХроирпНродродро▓рпНро▓',
            'potassium_issue': '{} роХрпНроХрпБ рокрпКроЯрпНроЯро╛роЪро┐ропроорпН роЕро│ро╡рпБ роЙроХроирпНродродро▓рпНро▓'
        }
    },
    'bn': {
        'name': 'ржмрж╛ржВрж▓рж╛',
        'direction': 'ltr',
        'states': {
            'Punjab': 'ржкржЮрзНржЬрж╛ржм',
            'Haryana': 'рж╣рж░рж┐ржпрж╝рж╛ржирж╛',
            'Uttar Pradesh': 'ржЙрждрзНрждрж░ ржкрзНрж░ржжрзЗрж╢',
            'Maharashtra': 'ржорж╣рж╛рж░рж╛рж╖рзНржЯрзНрж░',
            'Karnataka': 'ржХрж░рзНржгрж╛ржЯржХ',
            'Tamil Nadu': 'рждрж╛ржорж┐рж▓ржирж╛ржбрж╝рзБ',
            'Andhra Pradesh': 'ржЕржирзНржзрзНрж░ ржкрзНрж░ржжрзЗрж╢',
            'Gujarat': 'ржЧрзБржЬрж░рж╛ржЯ',
            'Odisha': 'ржУржбрж╝рж┐рж╢рж╛',
            'Jharkhand': 'ржЭрж╛ржбрж╝ржЦржгрзНржб',
            'West Bengal': 'ржкрж╢рзНржЪрж┐ржоржмржЩрзНржЧ',
            'Bihar': 'ржмрж┐рж╣рж╛рж░',
            'Select': 'ржЕржЮрзНржЪрж▓ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи'
        },
        'ui': {
            'app_name': 'VARUN AI',
            'tagline': 'ржЙржирзНржиржд ржЖржзрзБржирж┐ржХ рж░рзВржкрж╛ржирзНрждрж░рзЗрж░ ржЬржирзНржп рж╕рзЗрж░рж╛ ржирж┐рж░рзНржжрзЗрж╢рж┐ржХрж╛',
            'farmer_details': 'ржХрзГрж╖ржХрзЗрж░ ржмрж┐ржмрж░ржг',
            'full_name': 'ржкрзБрж░рзЛ ржирж╛ржо',
            'region': 'ржЕржЮрзНржЪрж▓',
            'farm_size': 'ржЦрж╛ржорж╛рж░рзЗрж░ ржЖржХрж╛рж░ (ржПржХрж░)',
            'soil_properties': 'ржорж╛ржЯрж┐рж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп',
            'soil_type': 'ржорж╛ржЯрж┐рж░ ржзрж░ржи',
            'soil_ph': 'ржорж╛ржЯрж┐рж░ pH',
            'soil_moisture': 'ржорж╛ржЯрж┐рж░ ржЖрж░рзНржжрзНрж░рждрж╛ (%)',
            'nitrogen': 'ржирж╛ржЗржЯрзНрж░рзЛржЬрзЗржи (kg/ha)',
            'phosphorus': 'ржлрж╕ржлрж░рж╛рж╕ (kg/ha)',
            'potassium': 'ржкржЯрж╛рж╕рж┐ржпрж╝рж╛ржо (kg/ha)',
            'environmental_factors': 'ржкрж░рж┐ржмрзЗрж╢ржЧржд ржХрж╛рж░ржг',
            'temperature': 'рждрж╛ржкржорж╛рждрзНрж░рж╛ (┬░C)',
            'rainfall': 'ржмрж╛рж░рзНрж╖рж┐ржХ ржмрзГрж╖рзНржЯрж┐ржкрж╛ржд (mm)',
            'humidity': 'ржЖрж░рзНржжрзНрж░рждрж╛ (%)',
            'analyze_button': 'ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржи ржПржмржВ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рзБржи',
            'dashboard': 'ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб',
            'crop_recommendation': 'ржлрж╕рж▓ рж╕рзБржкрж╛рж░рж┐рж╢',
            'soil_analysis': 'ржорж╛ржЯрж┐рж░ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг',
            'weather_forecast': 'ржЖржмрж╣рж╛ржУржпрж╝рж╛рж░ ржкрзВрж░рзНржмрж╛ржнрж╛рж╕',
            'farm_overview': 'ржЦрж╛ржорж╛рж░рзЗрж░ ржУржнрж╛рж░ржнрж┐ржЙ',
            'soil_nutrient_levels': 'ржорж╛ржЯрж┐рж░ ржкрзБрж╖рзНржЯрж┐рж░ ржорж╛рждрзНрж░рж╛',
            'recommended_crop': 'рж╕рзБржкрж╛рж░рж┐рж╢ржХрзГржд ржлрж╕рж▓',
            'expected_yield': 'ржкрзНрж░рждрзНржпрж╛рж╢рж┐ржд ржлрж▓ржи',
            'success_probability': 'рж╕рж╛ржлрж▓рзНржпрзЗрж░ рж╕ржорзНржнрж╛ржмржирж╛',
            'why_this_crop': 'ржПржЗ ржлрж╕рж▓ ржХрзЗржи?',
            'planting_guide': 'рж░рзЛржкржг ржЧрж╛ржЗржб',
            'best_planting_time': 'рж╕рзЗрж░рж╛ рж░рзЛржкржгрзЗрж░ рж╕ржоржпрж╝',
            'water_requirements': 'ржкрж╛ржирж┐рж░ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝рждрж╛',
            'fertilizer_recommendations': 'рж╕рж╛рж░ рж╕рзБржкрж╛рж░рж┐рж╢',
            'harvest_timeline': 'ржлрж╕рж▓ ржХрж╛ржЯрж╛рж░ рж╕ржоржпрж╝рж╕рзАржорж╛',
            'market_insights': 'ржмрж╛ржЬрж╛рж░ ржЕржирзНрждрж░рзНржжрзГрж╖рзНржЯрж┐',
            'current_market_price': 'ржмрж░рзНрждржорж╛ржи ржмрж╛ржЬрж╛рж░ ржорзВрж▓рзНржп',
            'demand_trend': 'ржЪрж╛рж╣рж┐ржжрж╛рж░ ржкрзНрж░ржмржгрждрж╛',
            'click_to_analyze': 'ржлрж╕рж▓рзЗрж░ рж╕рзБржкрж╛рж░рж┐рж╢ ржкрзЗрждрзЗ ржмрж╛ржЯржи ржХрзНрж▓рж┐ржХ ржХрж░рзБржи',
            'ph_level': 'pH ржорж╛рждрзНрж░рж╛',
            'moisture': 'ржЖрж░рзНржжрзНрж░рждрж╛',
            'organic_matter': 'ржЬрзИржм ржкржжрж╛рж░рзНрже',
            'wind_speed': 'ржмрж╛рждрж╛рж╕рзЗрж░ ржЧрждрж┐',
            'created_by': 'ржнрж╛рж▓рзЛржмрж╛рж╕рж╛ рж╕рж╣ рждрзИрж░рж┐',
            'team_name': 'ржЯрж┐ржо ржПржЧрзНрж░рзЛржирзЛржнрж╛',
            'for_sih': 'SIH 2025 ржПрж░ ржЬржирзНржп',
            'language': 'ржнрж╛рж╖рж╛',
            'select_language': 'ржнрж╛рж╖рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи',
            'not_specified': 'ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж░рж╛ рж╣ржпрж╝ржирж┐',
            'regional_preference': 'ржЖржЮрзНржЪрж▓рж┐ржХ ржкржЫржирзНржж',
            'soil_type_match': 'ржорж╛ржЯрж┐рж░ ржзрж░ржи ржорж┐рж▓',
            'ph_suitability': 'pH ржЙржкржпрзБржХрзНрждрждрж╛',
            'temperature_suitability': 'рждрж╛ржкржорж╛рждрзНрж░рж╛ ржЙржкржпрзБржХрзНрждрждрж╛',
            'rainfall_suitability': 'ржмрзГрж╖рзНржЯрж┐ржкрж╛ржд ржЙржкржпрзБржХрзНрждрждрж╛',
            'nutrient_suitability': 'ржкрзБрж╖рзНржЯрж┐ ржЙржкржпрзБржХрзНрждрждрж╛',
            'alternative_options': 'ржмрж┐ржХрж▓рзНржк ржмрж┐ржХрж▓рзНржк',
            'detailed_factor_analysis': 'ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржлрзНржпрж╛ржХрзНржЯрж░ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг',
            'suitability_analysis': 'ржПрж░ ржЬржирзНржп ржЙржкржпрзБржХрзНрждрждрж╛ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг',
            'analysis_loading': 'ржЖржкржирж╛рж░ ржЦрж╛ржорж╛рж░рзЗрж░ ржбрзЗржЯрж╛ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржПржмржВ рж╕рзБржкрж╛рж░рж┐рж╢ рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...'
        },
        'crops': {
            'Wheat': 'ржЧржо',
            'Rice': 'ржзрж╛ржи',
            'Maize': 'ржнрзБржЯрзНржЯрж╛',
            'Cotton': 'рждрзБрж▓рж╛',
            'Soybean': 'рж╕ржпрж╝рж╛ржмрж┐ржи',
            'Pulses': 'ржбрж╛рж▓',
            'Sugarcane': 'ржЖржЦ',
            'Groundnut': 'ржЪрж┐ржирж╛ржмрж╛ржжрж╛ржо'
        },
        'reasons': {
            'highly_suitable': '{} ржЕржЮрзНржЪрж▓рзЗрж░ ржЬржирзНржп ржЕрждрзНржпржирзНржд ржЙржкржпрзБржХрзНржд',
            'not_typical': '{} ржП рж╕рж╛ржзрж╛рж░ржгржд ржЪрж╛рж╖ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛',
            'ideal_soil': '{} ржорж╛ржЯрж┐рж░ ржЬржирзНржп ржЖржжрж░рзНрж╢',
            'not_optimal_soil': '{} ржорж╛ржЯрж┐рж░ ржЬржирзНржп рж╕рж░рзНржмрзЛрждрзНрждржо ржиржпрж╝ (ржкржЫржирзНржж ржХрж░рзЗ {})',
            'optimal_ph': 'рж╕рж░рзНржмрзЛрждрзНрждржо pH ржкрж░рж┐рж╕рзАржорж╛ ({}-{})',
            'ph_low': 'pH ржХрж┐ржЫрзБржЯрж╛ ржХржо (ржЖржжрж░рзНрж╢: {}-{})',
            'ph_high': 'pH ржХрж┐ржЫрзБржЯрж╛ ржмрзЗрж╢рж┐ (ржЖржжрж░рзНрж╢: {}-{})',
            'optimal_temp': 'рж╕рж░рзНржмрзЛрждрзНрждржо рждрж╛ржкржорж╛рждрзНрж░рж╛ ржкрж░рж┐рж╕рзАржорж╛ ({}-{}┬░C)',
            'temp_low': 'рждрж╛ржкржорж╛рждрзНрж░рж╛ ржХрж┐ржЫрзБржЯрж╛ ржХржо (ржЖржжрж░рзНрж╢: {}-{}┬░C)',
            'temp_high': 'рждрж╛ржкржорж╛рждрзНрж░рж╛ ржХрж┐ржЫрзБржЯрж╛ ржмрзЗрж╢рж┐ (ржЖржжрж░рзНрж╢: {}-{}┬░C)',
            'optimal_rain': 'рж╕рж░рзНржмрзЛрждрзНрждржо ржмрзГрж╖рзНржЯрж┐ржкрж╛ржд ({}-{}mm)',
            'rain_low': 'ржмрзГрж╖рзНржЯрж┐ржкрж╛ржд ржХрж┐ржЫрзБржЯрж╛ ржХржо (ржЖржжрж░рзНрж╢: {}-{}mm)',
            'rain_high': 'ржмрзГрж╖рзНржЯрж┐ржкрж╛ржд ржХрж┐ржЫрзБржЯрж╛ ржмрзЗрж╢рж┐ (ржЖржжрж░рзНрж╢: {}-{}mm)',
            'nitrogen_issue': '{} ржПрж░ ржЬржирзНржп ржирж╛ржЗржЯрзНрж░рзЛржЬрзЗржи рж╕рзНрждрж░ рж╕рж░рзНржмрзЛрждрзНрждржо ржиржпрж╝',
            'phosphorus_issue': '{} ржПрж░ ржЬржирзНржп ржлрж╕ржлрж░рж╛рж╕ рж╕рзНрждрж░ рж╕рж░рзНржмрзЛрждрзНрждржо ржиржпрж╝',
            'potassium_issue': '{} ржПрж░ ржЬржирзНржп ржкржЯрж╛рж╕рж┐ржпрж╝рж╛ржо рж╕рзНрждрж░ рж╕рж░рзНржмрзЛрждрзНрждржо ржиржпрж╝'
        }
    },
    'mr': {
        'name': 'рдорд░рд╛рдареА',
        'direction': 'ltr',
        'states': {
            'Punjab': 'рдкрдВрдЬрд╛рдм',
            'Haryana': 'рд╣рд░рд┐рдпрд╛рдгрд╛',
            'Uttar Pradesh': 'рдЙрддреНрддрд░ рдкреНрд░рджреЗрд╢',
            'Maharashtra': 'рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░',
            'Karnataka': 'рдХрд░реНрдирд╛рдЯрдХ',
            'Tamil Nadu': 'рддрдорд┐рд│рдирд╛рдбреВ',
            'Andhra Pradesh': 'рдЖрдВрдзреНрд░ рдкреНрд░рджреЗрд╢',
            'Gujarat': 'рдЧреБрдЬрд░рд╛рдд',
            'Odisha': 'рдУрдбрд┐рд╢рд╛',
            'Jharkhand': 'рдЭрд╛рд░рдЦрдВрдб',
            'West Bengal': 'рдкрд╢реНрдЪрд┐рдо рдмрдВрдЧрд╛рд▓',
            'Bihar': 'рдмрд┐рд╣рд╛рд░',
            'Select': 'рдкреНрд░рджреЗрд╢ рдирд┐рд╡рдбрд╛'
        },
        'ui': {
            'app_name': 'VARUN AI',
            'tagline': 'рд╡рд┐рдХрд╕рд┐рдд рдЖрдзреБрдирд┐рдХ рд░реВрдкрд╛рдВрддрд░рдгрд╛рд╕рд╛рдареА рдЙрддреНрддрдо рдорд╛рд░реНрдЧрджрд░реНрд╢рди',
            'farmer_details': 'рд╢реЗрддрдХрд░реА рддрдкрд╢реАрд▓',
            'full_name': 'рдкреВрд░реНрдг рдирд╛рд╡',
            'region': 'рдкреНрд░рджреЗрд╢',
            'farm_size': 'рд╢реЗрддрд╛рдЪрд╛ рдЖрдХрд╛рд░ (рдПрдХрд░)',
            'soil_properties': 'рдорд╛рддреАрдЪреЗ рдЧреБрдгрдзрд░реНрдо',
            'soil_type': 'рдорд╛рддреАрдЪрд╛ рдкреНрд░рдХрд╛рд░',
            'soil_ph': 'рдорд╛рддреАрдЪрд╛ pH',
            'soil_moisture': 'рдорд╛рддреАрдЪреА рдЖрд░реНрджреНрд░рддрд╛ (%)',
            'nitrogen': 'рдирд╛рдпрдЯреНрд░реЛрдЬрди (kg/ha)',
            'phosphorus': 'рдлреЙрд╕реНрдлрд░рд╕ (kg/ha)',
            'potassium': 'рдкреЛрдЯреЕрд╢рд┐рдпрдо (kg/ha)',
            'environmental_factors': 'рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рдШрдЯрдХ',
            'temperature': 'рддрд╛рдкрдорд╛рди (┬░C)',
            'rainfall': 'рд╡рд╛рд░реНрд╖рд┐рдХ рдкрд╛рдКрд╕ (mm)',
            'humidity': 'рдЖрд░реНрджреНрд░рддрд╛ (%)',
            'analyze_button': 'рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рд╛ рдЖрдгрд┐ рд╢рд┐рдлрд╛рд░рд╕ рдХрд░рд╛',
            'dashboard': 'рдбреЕрд╢рдмреЛрд░реНрдб',
            'crop_recommendation': 'рдкреАрдХ рд╢рд┐рдлрд╛рд░рд╕',
            'soil_analysis': 'рдорд╛рддреА рд╡рд┐рд╢реНрд▓реЗрд╖рдг',
            'weather_forecast': 'рд╣рд╡рд╛рдорд╛рди рдЕрдВрджрд╛рдЬ',
            'farm_overview': 'рд╢реЗрддрд╛рдЪрд╛ рдЖрдврд╛рд╡рд╛',
            'soil_nutrient_levels': 'рдорд╛рддреАрддреАрд▓ рдкреЛрд╖рдХ рджреНрд░рд╡реНрдп рдкрд╛рддрд│реА',
            'recommended_crop': 'рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реЗрд▓реА рдкреАрдХ',
            'expected_yield': 'рдЕрдкреЗрдХреНрд╖рд┐рдд рдЙрддреНрдкрд╛рджрди',
            'success_probability': 'рдпрд╢рд╛рдЪреА рд╢рдХреНрдпрддрд╛',
            'why_this_crop': 'рд╣реЗ рдкреАрдХ рдХрд╛?',
            'planting_guide': 'рд▓рд╛рдЧрд╡рдб рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ',
            'best_planting_time': 'рдЙрддреНрддрдо рд▓рд╛рдЧрд╡рдбреАрдЪреА рд╡реЗрд│',
            'water_requirements': 'рдкрд╛рдгреНрдпрд╛рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛',
            'fertilizer_recommendations': 'рдЦрдд рд╢рд┐рдлрд╛рд░рд╕реА',
            'harvest_timeline': 'рдХрд╛рдкрдгреА рд╡реЗрд│рд░реЗрд╖рд╛',
            'market_insights': 'рдмрд╛рдЬрд╛рд░рд╛рддреАрд▓ рдЕрдВрддрд░реНрджреГрд╖реНрдЯреА',
            'current_market_price': 'рд╕рдзреНрдпрд╛рдЪрд╛ рдмрд╛рдЬрд╛рд░рднрд╛рд╡',
            'demand_trend': 'рдорд╛рдЧрдгреАрдЪреА рдкреНрд░рд╡реГрддреНрддреА',
            'click_to_analyze': 'рдкреАрдХ рд╢рд┐рдлрд╛рд░рд╕реА рдорд┐рд│рд╡рд┐рдгреНрдпрд╛рд╕рд╛рдареА рдмрдЯрдг рдХреНрд▓рд┐рдХ рдХрд░рд╛',
            'ph_level': 'pH рдкрд╛рддрд│реА',
            'moisture': 'рдЖрд░реНрджреНрд░рддрд╛',
            'organic_matter': 'рд╕реЗрдВрджреНрд░рд┐рдп рдкрджрд╛рд░реНрде',
            'wind_speed': 'рд╡рд╛рд▒реНрдпрд╛рдЪреА рдЧрддреА',
            'created_by': 'рдкреНрд░реЗрдорд╛рдиреЗ рддрдпрд╛рд░ рдХреЗрд▓реЗ',
            'team_name': 'рдЯреАрдо рдЕреЕрдЧреНрд░реЛрдиреЛрд╡реНрд╣рд╛',
            'for_sih': 'SIH 2025 рд╕рд╛рдареА',
            'language': 'рднрд╛рд╖рд╛',
            'select_language': 'рднрд╛рд╖рд╛ рдирд┐рд╡рдбрд╛',
            'not_specified': 'рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╛рд╣реА',
            'regional_preference': 'рдкреНрд░рд╛рджреЗрд╢рд┐рдХ рдкреНрд░рд╛рдзрд╛рдиреНрдп',
            'soil_type_match': 'рдорд╛рддреА рдкреНрд░рдХрд╛рд░ рдЬреБрд│рдгреА',
            'ph_suitability': 'pH рдпреЛрдЧреНрдпрддрд╛',
            'temperature_suitability': 'рддрд╛рдкрдорд╛рди рдпреЛрдЧреНрдпрддрд╛',
            'rainfall_suitability': 'рдкрд╛рдКрд╕ рдпреЛрдЧреНрдпрддрд╛',
            'nutrient_suitability': 'рдкреЛрд╖рдХ рдпреЛрдЧреНрдпрддрд╛',
            'alternative_options': 'рдкрд░реНрдпрд╛рдпреА рдкрд░реНрдпрд╛рдп',
            'detailed_factor_analysis': 'рддрдкрд╢реАрд▓рд╡рд╛рд░ рдШрдЯрдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдг',
            'suitability_analysis': 'рд╕рд╛рдареА рдпреЛрдЧреНрдпрддрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг',
            'analysis_loading': 'рдЖрдкрд▓рд╛ рд╢реЗрдд рдбреЗрдЯрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЖрдгрд┐ рд╢рд┐рдлрд╛рд░рд╕реА рддрдпрд╛рд░ рдХреЗрд▓реНрдпрд╛ рдЬрд╛рдд рдЖрд╣реЗрдд...'
        },
        'crops': {
            'Wheat': 'рдЧрд╣реВ',
            'Rice': 'рддрд╛рдВрджреВрд│',
            'Maize': 'рдордХрд╛',
            'Cotton': 'рдХрд╛рдкреВрд╕',
            'Soybean': 'рд╕реЛрдпрд╛рдмреАрди',
            'Pulses': 'рдбрд╛рд│',
            'Sugarcane': 'рдКрд╕',
            'Groundnut': 'рднреБрдИрдореВрдЧ'
        },
        'reasons': {
            'highly_suitable': '{} рдкреНрд░рджреЗрд╢рд╛рд╕рд╛рдареА рдЕрддреНрдпрдВрдд рдпреЛрдЧреНрдп',
            'not_typical': '{} рдордзреНрдпреЗ рд╕рд╛рдорд╛рдиреНрдпрддрдГ рд▓рд╛рд╡рд▓реА рдЬрд╛рдд рдирд╛рд╣реА',
            'ideal_soil': '{} рдорд╛рддреАрд╕рд╛рдареА рдЖрджрд░реНрд╢',
            'not_optimal_soil': '{} рдорд╛рддреАрд╕рд╛рдареА рдЗрд╖реНрдЯрддрдо рдирд╛рд╣реА (рдкреНрд░рд╛рдзрд╛рдиреНрдп {})',
            'optimal_ph': 'рдЗрд╖реНрдЯрддрдо pH рд╢реНрд░реЗрдгреА ({}-{})',
            'ph_low': 'pH рдХрд┐рдВрдЪрд┐рдд рдХрдореА (рдЖрджрд░реНрд╢: {}-{})',
            'ph_high': 'pH рдХрд┐рдВрдЪрд┐рдд рдЬрд╛рд╕реНрдд (рдЖрджрд░реНрд╢: {}-{})',
            'optimal_temp': 'рдЗрд╖реНрдЯрддрдо рддрд╛рдкрдорд╛рди рд╢реНрд░реЗрдгреА ({}-{}┬░C)',
            'temp_low': 'рддрд╛рдкрдорд╛рди рдХрд┐рдВрдЪрд┐рдд рдХрдореА (рдЖрджрд░реНрд╢: {}-{}┬░C)',
            'temp_high': 'рддрд╛рдкрдорд╛рди рдХрд┐рдВрдЪрд┐рдд рдЬрд╛рд╕реНрдд (рдЖрджрд░реНрд╢: {}-{}┬░C)',
            'optimal_rain': 'рдЗрд╖реНрдЯрддрдо рдкрд╛рдКрд╕ ({}-{}mm)',
            'rain_low': 'рдкрд╛рдКрд╕ рдХрд┐рдВрдЪрд┐рдд рдХрдореА (рдЖрджрд░реНрд╢: {}-{}mm)',
            'rain_high': 'рдкрд╛рдКрд╕ рдХрд┐рдВрдЪрд┐рдд рдЬрд╛рд╕реНрдд (рдЖрджрд░реНрд╢: {}-{}mm)',
            'nitrogen_issue': '{} рд╕рд╛рдареА рдирд╛рдпрдЯреНрд░реЛрдЬрди рдкрд╛рддрд│реА рдЗрд╖реНрдЯрддрдо рдирд╛рд╣реА',
            'phosphorus_issue': '{} рд╕рд╛рдареА рдлреЙрд╕реНрдлрд░рд╕ рдкрд╛рддрд│реА рдЗрд╖реНрдЯрддрдо рдирд╛рд╣реА',
            'potassium_issue': '{} рд╕рд╛рдареА рдкреЛрдЯреЕрд╢рд┐рдпрдо рдкрд╛рддрд│реА рдЗрд╖реНрдЯрддрдо рдирд╛рд╣реА'
        }
    }
}

# State to language mapping
STATE_LANGUAGE_MAPPING = {
    'Odisha': 'or',
    'Jharkhand': 'hi',
    'Bihar': 'hi',
    'Punjab': 'hi',
    'Haryana': 'hi',
    'Uttar Pradesh': 'hi',
    'West Bengal': 'bn',
    'Maharashtra': 'mr',
    'Tamil Nadu': 'ta',
    'Default': 'en'
}

def get_language_for_state(state):
    """Get the default language for a given state"""
    return STATE_LANGUAGE_MAPPING.get(state, STATE_LANGUAGE_MAPPING['Default'])

def get_available_languages():
    """Return list of available languages"""
    return list(LANGUAGES.keys())

def get_state_name(state, lang):
    """Get translated state name"""
    return LANGUAGES[lang]['states'].get(state, state)

# Initialize session state for language
if 'language' not in st.session_state:
    st.session_state.language = 'en'
if 'last_state' not in st.session_state:
    st.session_state.last_state = ''

# ===== ENHANCED CSS STYLING =====
st.markdown("""
<style>
    :root {
        --primary-color: #2E8B57;
        --secondary-color: #3CB371;
        --accent-color: #4CAF50;
        --background-color: #FFFFFF;
        --card-background: #F8F9FA;
        --text-color: #333333;
        --border-color: #E0E0E0;
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        --hover-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --background-color: #1E1E1E;
            --card-background: #2D2D2D;
            --text-color: #FFFFFF;
            --border-color: #404040;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            --hover-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
    }

    .main-header {
        font-size: 3.5rem;
        color: var(--primary-color);
        text-align: center;
        font-weight: bold;
        margin-bottom: 0.5rem;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .tagline {
        font-size: 1.2rem;
        color: var(--secondary-color);
        text-align: center;
        margin-top: 0;
        margin-bottom: 2rem;
        font-style: italic;
    }

    .sub-header {
        font-size: 1.8rem;
        color: var(--primary-color);
        border-bottom: 2px solid var(--secondary-color);
        padding-bottom: 0.5rem;
        margin-bottom: 1.5rem;
    }

    .card {
        padding: 1.5rem;
        border-radius: 12px;
        background-color: var(--card-background);
        border: 1px solid var(--border-color);
        box-shadow: var(--shadow);
        margin: 1rem 0;
        transition: all 0.3s ease;
    }

    .card:hover {
        box-shadow: var(--hover-shadow);
        transform: translateY(-2px);
    }

    .recommendation-card {
        background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
        padding: 2rem;
        border-radius: 15px;
        border-left: 5px solid var(--accent-color);
        box-shadow: var(--shadow);
        margin: 1.5rem 0;
    }

    .weather-card {
        background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
        padding: 1.5rem;
        border-radius: 12px;
        text-align: center;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
    }

    .soil-image {
        border-radius: 12px;
        width: 100%;
        height: 200px;
        object-fit: cover;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
    }

    .footer {
        text-align: center;
        margin-top: 3rem;
        padding: 2rem;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        color: white;
        border-radius: 12px;
        box-shadow: var(--shadow);
    }

    .team-name {
        font-weight: bold;
        color: #FFD700;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }

    .language-selector {
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 1000;
        background: var(--card-background);
        padding: 0.5rem 1rem;
        border-radius: 25px;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
    }

    .stProgress > div > div > div > div {
        background: linear-gradient(90deg, var(--accent-color) 0%, #8BC34A 100%);
    }

    .metric-value {
        font-size: 1.8rem;
        font-weight: bold;
        color: var(--primary-color);
        margin: 0.5rem 0;
    }

    .metric-label {
        font-size: 0.9rem;
        color: var(--text-color);
        opacity: 0.8;
        margin-bottom: 0.5rem;
    }

    .analysis-card {
        background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
        padding: 1.2rem;
        border-radius: 10px;
        margin: 0.8rem 0;
        border: 1px solid var(--border-color);
    }

    .factor-score {
        font-size: 0.9rem;
        color: var(--primary-color);
        font-weight: bold;
        margin: 0.3rem 0;
    }

    /* Responsive design */
    @media (max-width: 768px) {
        .main-header {
            font-size: 2.5rem;
        }
        
        .card {
            padding: 1rem;
        }
        
        .language-selector {
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.3rem 0.8rem;
        }
    }
</style>
""", unsafe_allow_html=True)

# Helper function to get translated text
def t(key, lang=None):
    """Get translated text for the given key"""
    if lang is None:
        lang = st.session_state.language
    
    # Navigate through nested keys (e.g., 'ui.farmer_details')
    keys = key.split('.')
    value = LANGUAGES[lang]
    
    for k in keys:
        if isinstance(value, dict) and k in value:
            value = value[k]
        else:
            # Fallback to English if translation not found
            if lang != 'en':
                return t(key, 'en')
            return key  # Return the key itself as last resort
    
    return value

# Generate soil images if they don't exist
def generate_soil_images():
    try:
        soil_colors = {
            "clay": (180, 120, 80),
            "loam": (160, 100, 60),
            "sand": (220, 200, 160),
            "silt": (200, 180, 140)
        }
        
        os.makedirs("assets/soil_types", exist_ok=True)
        
        for soil_type, color in soil_colors.items():
            img_path = f"assets/soil_types/{soil_type}.png"
            if not os.path.exists(img_path):
                img = Image.new('RGB', (400, 300), color=color)
                draw = ImageDraw.Draw(img)
                
                # Add texture
                for _ in range(800):
                    x = np.random.randint(0, 400)
                    y = np.random.randint(0, 300)
                    size = np.random.randint(2, 8)
                    draw.ellipse([(x, y), (x+size, y+size)], 
                               fill=tuple(max(0, c-30) for c in color))
                
                img.save(img_path)
    except Exception as e:
        st.error(f"Error generating soil images: {e}")

# Generate logo if it doesn't exist
def generate_logo():
    try:
        if not os.path.exists("assets/logo.png"):
            img = Image.new('RGB', (400, 200), color=(46, 139, 87))
            draw = ImageDraw.Draw(img)
            
            # Draw VARUN text
            draw.text((120, 70), "VARUN", fill=(255, 255, 255))
            draw.text((130, 120), "ai", fill=(255, 215, 0))
            
            # Draw plant icon
            draw.ellipse([(30, 70), (90, 130)], fill=(255, 215, 0))  # Sun
            
            # Draw a small plant
            draw.rectangle([(180, 130), (190, 150)], fill=(139, 69, 19))  # Stem
            draw.polygon([(175, 130), (185, 100), (195, 130)], fill=(34, 139, 34))  # Leaves
            
            img.save("assets/logo.png")
    except Exception as e:
        st.error(f"Error generating logo: {e}")

# Generate images
try:
    os.makedirs("assets", exist_ok=True)
    os.makedirs("assets/soil_types", exist_ok=True)
    generate_logo()
    generate_soil_images()
except Exception as e:
    st.error(f"Error creating assets directory: {e}")

# Language selector at top right
with st.container():
    col1, col2, col3 = st.columns([3, 1, 1])
    with col3:
        st.markdown('<div class="language-selector">', unsafe_allow_html=True)
        selected_language = st.selectbox(
            "ЁЯМР",
            options=get_available_languages(),
            format_func=lambda x: LANGUAGES[x]['name'],
            key='language_selector',
            index=get_available_languages().index(st.session_state.language),
            label_visibility="collapsed"
        )
        st.markdown('</div>', unsafe_allow_html=True)
        
        # Update language when selector changes
        if selected_language != st.session_state.language:
            st.session_state.language = selected_language
            st.rerun()

# App header
col1, col2, col3 = st.columns([1, 3, 1])
with col2:
    st.markdown(f'<h1 class="main-header">VARUN<span style="color: #FFD700;">ai</span></h1>', unsafe_allow_html=True)
    st.markdown(f'<p class="tagline">{t("ui.tagline")}</p>', unsafe_allow_html=True)

# Sidebar
with st.sidebar:
    try:
        st.image("assets/logo.png", width=280)
    except:
        st.warning("Logo image not found")
    
    st.markdown(f"## {t('ui.farmer_details')}")
    
    farmer_name = st.text_input(t('ui.full_name'))
    
    # Get state names in current language
    state_options = list(LANGUAGES['en']['states'].keys())
    state_display_names = [get_state_name(state, st.session_state.language) for state in state_options]
    
    selected_state_index = st.selectbox(
        t('ui.region'),
        range(len(state_options)),
        format_func=lambda i: state_display_names[i]
    )
    
    farm_location = state_options[selected_state_index]
    
    # Update language based on state selection
    if farm_location and farm_location != st.session_state.last_state:
        state_language = get_language_for_state(farm_location)
        if state_language != st.session_state.language:
            st.session_state.language = state_language
            st.session_state.last_state = farm_location
            st.rerun()
    
    farm_size = st.slider(t('ui.farm_size'), 1, 100, 10)
    
    st.markdown(f"## {t('ui.soil_properties')}")
    
    # Get soil types in current language
    soil_options = ["Select", "Loam", "Clay", "Sandy", "Silt"]
    soil_display_names = [t('ui.select') if opt == "Select" else opt for opt in soil_options]
    
    selected_soil_index = st.selectbox(
        t('ui.soil_type'),
        range(len(soil_options)),
        format_func=lambda i: soil_display_names[i]
    )
    
    soil_type = soil_options[selected_soil_index]
    
    soil_ph = st.slider(t('ui.soil_ph'), 4.0, 9.0, 6.5)
    soil_moisture = st.slider(t('ui.soil_moisture'), 0, 100, 50)
    nitrogen = st.slider(t('ui.nitrogen'), 0, 200, 50)
    phosphorus = st.slider(t('ui.phosphorus'), 0, 200, 40)
    potassium = st.slider(t('ui.potassium'), 0, 200, 60)
    
    st.markdown(f"## {t('ui.environmental_factors')}")
    temperature = st.slider(t('ui.temperature'), 0, 45, 25)
    rainfall = st.slider(t('ui.rainfall'), 0, 2000, 800)
    humidity = st.slider(t('ui.humidity'), 0, 100, 60)
    
    analyze_button = st.button(t('ui.analyze_button'), type="primary", use_container_width=True)

# Enhanced crop recommendation model with detailed analysis
def predict_best_crop(soil_type, ph, nitrogen, phosphorus, potassium, temperature, rainfall, humidity, region):
    # Regional crop preferences
    regional_preferences = {
        "Punjab": ["Wheat", "Rice", "Cotton", "Maize", "Sugarcane"],
        "Haryana": ["Wheat", "Rice", "Cotton", "Mustard", "Bajra"],
        "Uttar Pradesh": ["Wheat", "Rice", "Sugarcane", "Potato", "Pulses"],
        "Maharashtra": ["Cotton", "Soybean", "Pulses", "Sugarcane", "Groundnut"],
        "Karnataka": ["Rice", "Cotton", "Pulses", "Coffee", "Sugarcane"],
        "Tamil Nadu": ["Rice", "Sugarcane", "Cotton", "Groundnut", "Coconut"],
        "Andhra Pradesh": ["Rice", "Cotton", "Chilli", "Groundnut", "Tobacco"],
        "Gujarat": ["Cotton", "Groundnut", "Wheat", "Pulses", "Castor"],
        "Odisha": ["Rice", "Pulses", "Oilseeds", "Millets", "Jute"],
        "Jharkhand": ["Rice", "Pulses", "Oilseeds", "Maize", "Wheat"],
        "West Bengal": ["Rice", "Jute", "Tea", "Potato", "Wheat"],
        "Bihar": ["Rice", "Wheat", "Maize", "Pulses", "Sugarcane"]
    }
    
    # Expanded crop data with optimal conditions
    crops = [
        {
            'name': 'Wheat', 'soil_type': 'Loam', 'ph_min': 6.0, 'ph_max': 7.5,
            'temp_min': 10, 'temp_max': 25, 'rainfall_min': 500, 'rainfall_max': 1000,
            'n_min': 50, 'n_max': 80, 'p_min': 30, 'p_max': 60, 'k_min': 40, 'k_max': 70
        },
        {
            'name': 'Rice', 'soil_type': 'Clay', 'ph_min': 5.0, 'ph_max': 6.5,
            'temp_min': 20, 'temp_max': 35, 'rainfall_min': 1000, 'rainfall_max': 2000,
            'n_min': 60, 'n_max': 90, 'p_min': 40, 'p_max': 70, 'k_min': 50, 'k_max': 80
        },
        {
            'name': 'Maize', 'soil_type': 'Loam', 'ph_min': 5.5, 'ph_max': 7.0,
            'temp_min': 15, 'temp_max': 30, 'rainfall_min': 600, 'rainfall_max': 1200,
            'n_min': 70, 'n_max': 100, 'p_min': 50, 'p_max': 80, 'k_min': 60, 'k_max': 90
        },
        {
            'name': 'Cotton', 'soil_type': 'Sandy', 'ph_min': 5.5, 'ph_max': 7.5,
            'temp_min': 20, 'temp_max': 35, 'rainfall_min': 500, 'rainfall_max': 800,
            'n_min': 40, 'n_max': 70, 'p_min': 30, 'p_max': 60, 'k_min': 50, 'k_max': 80
        },
        {
            'name': 'Soybean', 'soil_type': 'Silt', 'ph_min': 6.0, 'ph_max': 7.0,
            'temp_min': 15, 'temp_max': 30, 'rainfall_min': 600, 'rainfall_max': 1000,
            'n_min': 30, 'n_max': 60, 'p_min': 40, 'p_max': 70, 'k_min': 50, 'k_max': 80
        },
        {
            'name': 'Pulses', 'soil_type': 'Loam', 'ph_min': 6.0, 'ph_max': 7.5,
            'temp_min': 15, 'temp_max': 30, 'rainfall_min': 500, 'rainfall_max': 800,
            'n_min': 20, 'n_max': 50, 'p_min': 30, 'p_max': 60, 'k_min': 40, 'k_max': 70
        },
        {
            'name': 'Sugarcane', 'soil_type': 'Loam', 'ph_min': 6.0, 'ph_max': 7.5,
            'temp_min': 20, 'temp_max': 35, 'rainfall_min': 1000, 'rainfall_max': 1500,
            'n_min': 100, 'n_max': 150, 'p_min': 50, 'p_max': 80, 'k_min': 80, 'k_max': 120
        },
        {
            'name': 'Groundnut', 'soil_type': 'Sandy', 'ph_min': 5.5, 'ph_max': 7.0,
            'temp_min': 20, 'temp_max': 35, 'rainfall_min': 500, 'rainfall_max': 1000,
            'n_min': 20, 'n_max': 40, 'p_min': 30, 'p_max': 50, 'k_min': 40, 'k_max': 60
        }
    ]
    
    # Calculate scores and detailed analysis
    crop_analyses = []
    for crop in crops:
        analysis = {
            'name': crop['name'],
            'score': 0,
            'details': {
                'regional_preference': 0,
                'soil_type': 0,
                'ph_suitability': 0,
                'temperature_suitability': 0,
                'rainfall_suitability': 0,
                'nutrient_suitability': 0
            },
            'reasons': []
        }
        
        # Regional preference (higher weight)
        if region != "Select" and crop['name'] in regional_preferences.get(region, []):
            analysis['score'] += 30
            analysis['details']['regional_preference'] = 30
            analysis['reasons'].append(t('reasons.highly_suitable').format(region))
        elif region != "Select":
            analysis['reasons'].append(t('reasons.not_typical').format(region))
        
        # Soil type match
        if soil_type != "Select" and crop['soil_type'].lower() == soil_type.lower():
            analysis['score'] += 25
            analysis['details']['soil_type'] = 25
            analysis['reasons'].append(t('reasons.ideal_soil').format(soil_type))
        elif soil_type != "Select":
            analysis['reasons'].append(t('reasons.not_optimal_soil').format(soil_type, crop['soil_type']))
        
        # pH suitability
        if crop['ph_min'] <= ph <= crop['ph_max']:
            ph_score = 15
            analysis['reasons'].append(t('reasons.optimal_ph').format(crop['ph_min'], crop['ph_max']))
        else:
            # Calculate penalty based on deviation from optimal range
            if ph < crop['ph_min']:
                deviation = crop['ph_min'] - ph
                ph_score = max(0, 15 - (deviation * 5))
                analysis['reasons'].append(t('reasons.ph_low').format(crop['ph_min'], crop['ph_max']))
            else:
                deviation = ph - crop['ph_max']
                ph_score = max(0, 15 - (deviation * 5))
                analysis['reasons'].append(t('reasons.ph_high').format(crop['ph_min'], crop['ph_max']))
        
        analysis['score'] += ph_score
        analysis['details']['ph_suitability'] = ph_score
        
        # Temperature suitability
        if crop['temp_min'] <= temperature <= crop['temp_max']:
            temp_score = 10
            analysis['reasons'].append(t('reasons.optimal_temp').format(crop['temp_min'], crop['temp_max']))
        else:
            # Calculate penalty based on deviation from optimal range
            if temperature < crop['temp_min']:
                deviation = crop['temp_min'] - temperature
                temp_score = max(0, 10 - (deviation * 0.5))
                analysis['reasons'].append(t('reasons.temp_low').format(crop['temp_min'], crop['temp_max']))
            else:
                deviation = temperature - crop['temp_max']
                temp_score = max(0, 10 - (deviation * 0.5))
                analysis['reasons'].append(t('reasons.temp_high').format(crop['temp_min'], crop['temp_max']))
        
        analysis['score'] += temp_score
        analysis['details']['temperature_suitability'] = temp_score
        
        # Rainfall suitability
        if crop['rainfall_min'] <= rainfall <= crop['rainfall_max']:
            rain_score = 10
            analysis['reasons'].append(t('reasons.optimal_rain').format(crop['rainfall_min'], crop['rainfall_max']))
        else:
            # Calculate penalty based on deviation from optimal range
            if rainfall < crop['rainfall_min']:
                deviation = crop['rainfall_min'] - rainfall
                rain_score = max(0, 10 - (deviation * 0.01))
                analysis['reasons'].append(f"Rainfall slightly high (ideal: {crop['rainfall_min']}-{crop['rainfall_max']}mm)")
        
        analysis['score'] += rain_score
        analysis['details']['rainfall_suitability'] = rain_score
        
        # Nutrient suitability
        n_score = 8 if crop['n_min'] <= nitrogen <= crop['n_max'] else max(0, 8 - abs(nitrogen - (crop['n_min'] + crop['n_max'])/2) * 0.2)
        p_score = 8 if crop['p_min'] <= phosphorus <= crop['p_max'] else max(0, 8 - abs(phosphorus - (crop['p_min'] + crop['p_max'])/2) * 0.2)
        k_score = 9 if crop['k_min'] <= potassium <= crop['k_max'] else max(0, 9 - abs(potassium - (crop['k_min'] + crop['k_max'])/2) * 0.2)
        
        nutrient_score = n_score + p_score + k_score
        analysis['score'] += nutrient_score
        analysis['details']['nutrient_suitability'] = nutrient_score
        
        if n_score < 5:
            analysis['reasons'].append(f"Nitrogen level not optimal for {crop['name']}")
        if p_score < 5:
            analysis['reasons'].append(f"Phosphorus level not optimal for {crop['name']}")
        if k_score < 5:
            analysis['reasons'].append(f"Potassium level not optimal for {crop['name']}")
        
        crop_analyses.append(analysis)
    
    # Sort by score
    crop_analyses.sort(key=lambda x: x['score'], reverse=True)
    
    # Generate detailed recommendations for top 3 crops
    recommendations = []
    planting_times = {
        'Wheat': 'October-November',
        'Rice': 'June-July', 
        'Maize': 'April-May',
        'Cotton': 'May-June',
        'Soybean': 'June-July',
        'Pulses': 'October-November',
        'Sugarcane': 'February-March',
        'Groundnut': 'June-July'
    }
    
    for i, analysis in enumerate(crop_analyses[:3]):
        crop_name = analysis['name']
        recommendations.append({
            'rank': i+1,
            'crop': crop_name,
            'score': analysis['score'],
            'probability': min(95, max(65, int(analysis['score']))),
            'yield': f"{np.random.uniform(2.0, 5.0):.1f}",
            'reasons': analysis['reasons'],
            'details': analysis['details'],
            'planting_time': planting_times.get(crop_name, 'Varies by region'),
            'water_req': 'Moderate (600-800 mm)' if crop_name in ['Wheat', 'Maize'] else 
                         'High (1000-1500 mm)' if crop_name == 'Rice' else
                         'Low (400-600 mm)' if crop_name == 'Cotton' else 
                         'Moderate (500-700 mm)' if crop_name in ['Soybean', 'Pulses'] else
                         'High (1200-1800 mm)' if crop_name == 'Sugarcane' else
                         'Moderate (500-800 mm)',
            'fertilizer': 'N:P:K = 60:40:40 kg/ha' if crop_name == 'Wheat' else 
                          'N:P:K = 80:40:40 kg/ha' if crop_name == 'Rice' else
                          'N:P:K = 100:50:50 kg/ha' if crop_name == 'Maize' else
                          'N:P:K = 50:25:25 kg/ha' if crop_name == 'Cotton' else 
                          'N:P:K = 40:60:40 kg/ha' if crop_name == 'Soybean' else
                          'N:P:K = 150:60:100 kg/ha' if crop_name == 'Sugarcane' else
                          'N:P:K = 20:50:40 kg/ha',
            'harvest_time': 'March-April' if crop_name == 'Wheat' else 
                            'October-November' if crop_name == 'Rice' else
                            'August-September' if crop_name == 'Maize' else
                            'October-December' if crop_name == 'Cotton' else 
                            'September-October' if crop_name == 'Soybean' else
                            'February-March' if crop_name == 'Sugarcane' else
                            'September-October',
            'market_price': f"тВ╣{np.random.randint(25, 55)}",
            'demand_trend': 'High' if crop_name in ['Rice', 'Wheat'] else 
                            'Moderate' if crop_name in ['Maize', 'Cotton'] else
                            'Stable'
        })
    
    return recommendations

# Function to create suitability visualization
def create_suitability_chart(details, crop_name):
    categories = ['Regional\nPreference', 'Soil Type\nMatch', 'pH\nSuitability', 
                 'Temperature\nSuitability', 'Rainfall\nSuitability', 'Nutrient\nSuitability']
    values = [details['regional_preference'], details['soil_type'], details['ph_suitability'],
             details['temperature_suitability'], details['rainfall_suitability'], details['nutrient_suitability']]
    max_values = [30, 25, 15, 10, 10, 25]  # Maximum possible scores for each category
    
    fig = go.Figure()
    
    # Add actual values
    fig.add_trace(go.Scatterpolar(
        r=values,
        theta=categories,
        fill='toself',
        name='Actual Suitability',
        line_color='#4CAF50'
    ))
    
    # Add maximum possible values (for reference)
    fig.add_trace(go.Scatterpolar(
        r=max_values,
        theta=categories,
        fill='toself',
        name='Maximum Possible',
        line_color='#FF9800',
        opacity=0.2
    ))
    
    fig.update_layout(
        polar=dict(
            radialaxis=dict(
                visible=True,
                range=[0, 30]  # Set range based on maximum value
            )),
        showlegend=True,
        title=f"Suitability Analysis for {crop_name}"
    )
    
    return fig

# Function to display detailed factor analysis
def display_factor_analysis(details):
    st.markdown("#### Detailed Factor Analysis")
    
    col1, col2, col3 = st.columns(3)
    
    with col1:
        st.markdown(f"Regional Preference")
        st.markdown(f'<p class="factor-score">{details["regional_preference"]}/30</p>', unsafe_allow_html=True)
        st.progress(details["regional_preference"]/30)
        
        st.markdown(f"Soil Type Match")
        st.markdown(f'<p class="factor-score">{details["soil_type"]}/25</p>', unsafe_allow_html=True)
        st.progress(details["soil_type"]/25)
    
    with col2:
        st.markdown(f"pH Suitability")
        st.markdown(f'<p class="factor-score">{details["ph_suitability"]}/15</p>', unsafe_allow_html=True)
        st.progress(details["ph_suitability"]/15)
        
        st.markdown(f"Temperature Suitability")
        st.markdown(f'<p class="factor-score">{details["temperature_suitability"]}/10</p>', unsafe_allow_html=True)
        st.progress(details["temperature_suitability"]/10)
    
    with col3:
        st.markdown(f"Rainfall Suitability")
        st.markdown(f'<p class="factor-score">{details["rainfall_suitability"]}/10</p>', unsafe_allow_html=True)
        st.progress(details["rainfall_suitability"]/10)
        
        st.markdown(f"Nutrient Suitability")
        st.markdown(f'<p class="factor-score">{details["nutrient_suitability"]}/25</p>', unsafe_allow_html=True)
        st.progress(details["nutrient_suitability"]/25)

# Main content
tab1, tab2, tab3, tab4 = st.tabs(["Dashboard", "Crop Recommendation", "Soil Analysis", "Weather Forecast"])

with tab1:
    st.markdown('<h2 class="sub-header">Farm Overview</h2>', unsafe_allow_html=True)
    
    col1, col2, col3 = st.columns(3)
    with col1: st.markdown('<div class="card"><h3>Farm Size</h3><p style="font-size: 24px; color: #2E8B57;">' + str(farm_size) + ' acres</p></div>', unsafe_allow_html=True)
    with col2: 
        soil_display = soil_type if soil_type != "Select" else "Not specified"
        st.markdown('<div class="card"><h3>Soil Type</h3><p style="font-size: 24px; color: #2E8B57;">' + soil_display + '</p></div>', unsafe_allow_html=True)
    with col3: 
        region_display = farm_location if farm_location != "Select" else "Not specified"
        st.markdown('<div class="card"><h3>Region</h3><p style="font-size: 24px; color: #2E8B57;">' + region_display + '</p></div>', unsafe_allow_html=True)

with tab2:
    st.markdown('<h2 class="sub-header">Crop Recommendation</h2>', unsafe_allow_html=True)
    
    if analyze_button:
        with st.spinner('Analyzing your farm data and generating recommendations...'):
            progress_bar = st.progress(0)
            for percent_complete in range(100):
                time.sleep(0.01)
                progress_bar.progress(percent_complete + 1)
            
            recommendations = predict_best_crop(soil_type, soil_ph, nitrogen, phosphorus, 
                                              potassium, temperature, rainfall, humidity, farm_location)
            
            # Display top recommendation
            top_recommendation = recommendations[0]
            st.markdown('<div class="recommendation-card">', unsafe_allow_html=True)
            st.markdown(f"### ЁЯМ▒ Top Recommendation: {top_recommendation['crop']}")
            st.markdown(f"Expected Yield: {top_recommendation['yield']} tons/acre")
            st.markdown(f"Success Probability: {top_recommendation['probability']}%")
            st.markdown('</div>', unsafe_allow_html=True)
            
            # Display suitability chart
            st.plotly_chart(create_suitability_chart(top_recommendation['details'], top_recommendation['crop']), 
                           use_container_width=True)
            
            # Display detailed factor analysis
            display_factor_analysis(top_recommendation['details'])
            
            # Display reasons
            st.markdown("#### Why this crop?")
            for reason in top_recommendation['reasons']:
                st.info(f"тАв {reason}")
            
            # Display crop details
            col1, col2 = st.columns(2)
            with col1:
                st.markdown("Best Planting Time")
                st.write(top_recommendation['planting_time'])
                st.markdown("Water Requirements")
                st.write(top_recommendation['water_req'])
            with col2:
                st.markdown("Fertilizer Recommendations")
                st.write(top_recommendation['fertilizer'])
                st.markdown("Harvest Timeline")
                st.write(top_recommendation['harvest_time'])
            
            # Display market insights
            st.markdown("#### Market Insights")
            st.success(f"Current market price: {top_recommendation['market_price']} per kg")
            st.write(f"Demand trend: {top_recommendation['demand_trend']}")
            
            # Show alternative options
            if len(recommendations) > 1:
                st.markdown("#### Alternative Options")
                cols = st.columns(len(recommendations) - 1)
                for idx, rec in enumerate(recommendations[1:]):
                    with cols[idx]:
                        st.markdown(f'<div class="analysis-card"><h4>{rec["crop"]}</h4><p>Score: {rec["score"]:.1f}</p><p>Probability: {rec["probability"]}%</p></div>', 
                                  unsafe_allow_html=True)
    
    else:
        st.info("Click the 'Analyze & Recommend' button in the sidebar to get crop recommendations")

with tab3:
    st.markdown('<h2 class="sub-header">Soil Analysis</h2>', unsafe_allow_html=True)
    
    if soil_type != "Select":
        try:
            soil_img = Image.open(f"assets/soil_types/{soil_type.lower()}.png")
            st.image(soil_img, caption=f"{soil_type} Soil", use_container_width=True)
        except:
            st.warning("Soil image not available")
    
    col1, col2, col3, col4 = st.columns(4)
    with col1: 
        st.markdown('<div class="weather-card"><h4>pH Level</h4><p style="font-size: 20px;">' + str(soil_ph) + '</p></div>', unsafe_allow_html=True)
    with col2: 
        st.markdown('<div class="weather-card"><h4>Moisture</h4><p style="font-size: 20px;">' + str(soil_moisture) + '%</p></div>', unsafe_allow_html=True)
    with col3: 
        st.markdown('<div class="weather-card"><h4>Nitrogen</h4><p style="font-size: 20px;">' + str(nitrogen) + ' kg/ha</p></div>', unsafe_allow_html=True)
    with col4: 
        st.markdown('<div class="weather-card"><h4>Organic Matter</h4><p style="font-size: 20px;">3.2%</p></div>', unsafe_allow_html=True)
    
    col1, col2 = st.columns(2)
    with col1: 
        st.markdown('<div class="weather-card"><h4>Phosphorus</h4><p style="font-size: 20px;">' + str(phosphorus) + ' kg/ha</p></div>', unsafe_allow_html=True)
    with col2: 
        st.markdown('<div class="weather-card"><h4>Potassium</h4><p style="font-size: 20px;">' + str(potassium) + ' kg/ha</p></div>', unsafe_allow_html=True)

with tab4:
    st.markdown('<h2 class="sub-header">Weather Forecast</h2>', unsafe_allow_html=True)
    
    col1, col2, col3, col4 = st.columns(4)
    with col1: 
        st.markdown('<div class="weather-card"><h4>Temperature</h4><p style="font-size: 20px;">' + str(temperature) + '┬░C</p></div>', unsafe_allow_html=True)
    with col2: 
        st.markdown('<div class="weather-card"><h4>Humidity</h4><p style="font-size: 20px;">' + str(humidity) + '%</p></div>', unsafe_allow_html=True)
    with col3: 
        st.markdown('<div class="weather-card"><h4>Rainfall</h4><p style="font-size: 20px;">' + str(rainfall) + ' mm</p></div>', unsafe_allow_html=True)
    with col4: 
        st.markdown('<div class="weather-card"><h4>Wind Speed</h4><p style="font-size: 20px;">12 km/h</p></div>', unsafe_allow_html=True)
    
    # Generate forecast data
    dates = [datetime.now() + timedelta(days=i) for i in range(7)]
    temp_forecast = [temperature + np.random.uniform(-3, 3) for _ in range(7)]
    rain_forecast = [max(0, rainfall/365 + np.random.uniform(-2, 5)) for _ in range(7)]
    
    # Create forecast chart
    fig = go.Figure()
    fig.add_trace(go.Scatter(x=dates, y=temp_forecast, mode='lines+markers', name='Temperature (┬░C)', line=dict(color='red')))
    fig.add_trace(go.Bar(x=dates, y=rain_forecast, name='Rainfall (mm)', yaxis='y2', marker_color='blue'))
    
    fig.update_layout(
        title='7-Day Weather Forecast',
        xaxis=dict(title='Date'),
        yaxis=dict(title='Temperature (┬░C)', side='left', showgrid=False),
        yaxis2=dict(title='Rainfall (mm)', side='right', overlaying='y', showgrid=False),
        legend=dict(x=0, y=1.1, orientation='h')
    )
    
    st.plotly_chart(fig, use_container_width=True)

# Footer
st.markdown("""
<div class="footer">
    <p>Created with тЭд by <span class="team-name">Team AgroNova</span> for SIH 2025</p>
    <p>VARUN AI - Vikasit Adhunik Roopantaran ke liye Uttam Nirdesh</p>
</div>
""", unsafe_allow_html=True)
